{
  "author": "dragondude4",
  "original_created_utc": 1651404791,
  "title": "Yuga Labs and BAYC could’ve saved users up to $80 million in fees if they had just used simple gas optimizations in their NFT contract",
  "created_utc": 1651426942,
  "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;The highly-anticipated virtual land sale related to the Bored Ape Yacht Club went live hours ago and affected a large portion of the entire crypto market. The massive demand led to ETH fees worth nearly $200 million to be spent on gas for the land sale in one hour. This is because their contract had nearly zero gas optimizations.&lt;/p&gt;\n\n&lt;p&gt;Will Papper, the co-founder of Syndicate DAO, tweeted a few “tricks” that could have “saved many millions.” Here are some parts of the Twitter thread:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Gas optimization 1: Remove the ERC721Enumerable extension.&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/h36vcy84ouw81.png?width=1200&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=0fe910f48ab3529bf7f5abba2c4d4aab3d677602\"&gt;https://preview.redd.it/h36vcy84ouw81.png?width=1200&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=0fe910f48ab3529bf7f5abba2c4d4aab3d677602&lt;/a&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;The ERC721Enumerable extension is used to track the owners of an NFT on-chain. Mints that remove the ERC721Enumerable extension save around 70% in gas costs. This tiny change would have saved around $70M that hour. The ERC721Enumerable extension is mostly unnecessary. In the majority of cases, tracking ownership on-chain is not useful. Why? You can just grab the data off-chain on the front-end and pass it into smart contracts instead! Every front-end is able to handle this easily.  &lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Gas optimization 2: Use ERC721A (erc721a.org). ERC721A is a standard developed by the @AzukiOfficial team.&lt;/strong&gt;  &lt;/p&gt;\n\n&lt;p&gt;This extension means that minting multiple NFTs to the same wallet is nearly the same price as minting a single NFT. This would save money for every multi-mint. ERC721A makes transfers slightly more expensive but mints dramatically cheaper. In this case where the gas fees on the mint are so high, this is clearly worth it. The vast majority of the mints were multi-mints. All of these incurred 2X or more in unnecessary costs ($10M+)  &lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Gas optimization 3: Switch from _safeMint() to _mint()&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/8p5c8zg8ouw81.png?width=1199&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=a1cf3f45f2826502d7ea517cf948d8573adb9b70\"&gt;https://preview.redd.it/8p5c8zg8ouw81.png?width=1199&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=a1cf3f45f2826502d7ea517cf948d8573adb9b70&lt;/a&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;_safeMint() checks every address to ensure that it can handle NFTs. If the address is not able to handle NFTs, it ensures that the transaction will fail. This is unnecessary. Every address minting can likely handle NFTs. Image _safeMint() is one of the more annoying and unnecessary parts of the ERC721 standard. In theory it ensures that mints are going to wallets that can handle NFTs, in practice it adds gas and makes mints less safe!&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/ahzeq1neouw81.png?width=1199&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=1719f786d9941d7690cfa7b833f0bea33ce609d3\"&gt;https://preview.redd.it/ahzeq1neouw81.png?width=1199&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=1719f786d9941d7690cfa7b833f0bea33ce609d3&lt;/a&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;This condition is only hit for very non-standard smart contracts. Image Implementing these gas optimizations would be as simple as:&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Change the word &amp;quot;ERC721Enumerable&amp;quot; to &amp;quot;ERC721&amp;quot;&lt;/li&gt;\n&lt;li&gt;Import ERC721A&lt;/li&gt;\n&lt;li&gt;Change the word &amp;quot;_safeMint()&amp;quot; to &amp;quot;_mint()&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Modifying a few words would have saved $80M+.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Yuga Labs also addressed the event&lt;/p&gt;\n\n&lt;p&gt;&amp;#x200B;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://preview.redd.it/c669czzoouw81.png?width=1058&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=09b6b7ef2a5cfe22ed3ebcc334c1d2e76af6d96f\"&gt;https://preview.redd.it/c669czzoouw81.png?width=1058&amp;amp;format=png&amp;amp;auto=webp&amp;amp;s=09b6b7ef2a5cfe22ed3ebcc334c1d2e76af6d96f&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;I have my own little conspiracy theory that they had this inefficient launch on purpose to justify having an “ApeChain”.&lt;/p&gt;\n\n&lt;p&gt;I actually think it’s kind of neat that the ETH got burned because of yuga’s carelessness (and my selfishness lol). Instead of that $100m going to yuga and the apes, it got kinda redistributed to every other ETH holder.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;",
  "score": 326,
  "permalink": "/r/CryptoCurrency/comments/ufxzmx/yuga_labs_and_bayc_couldve_saved_users_up_to_80/",
  "subreddit": "CryptoCurrency",
  "id": "ufxzmx",
  "is_self": true,
  "media": null,
  "is_video": false,
  "sensitive": false,
  "the_new_excerpt": "The highly-anticipated virtual land sale related to the Bored Ape Yacht Club\nwent live hours ago and affected a large portion of the entire crypto market.\nThe massive demand led to ETH fees worth nearly $200 million to be spent on gas\nfor the land sale in one hour. This is because their contract…",
  "localize": [
    {
      "locale": "ja",
      "the_new_excerpt": "Bored Ape Yacht Clubに関連する待望の仮想土地販売について\nが数時間前に稼動し、暗号市場全体の大部分に影響を及ぼしました。\n大量の需要により、2億ドル近くに相当するETH手数料がガスに費やされ\nに費やされました。これは、彼らの契約...",
      "title": "Yuga LabsとBAYCは、NFT契約において単純なガスの最適化を行うだけで、ユーザーの料金を最大8000万ドル節約できたはずだ"
    },
    {
      "locale": "zh",
      "the_new_excerpt": "备受关注的与Bored Ape游艇俱乐部有关的虚拟土地出售事件\n几个小时前上线，影响了整个加密货币市场的很大一部分。\n大量的需求导致价值近2亿美元的ETH费用被用于购买天然气\n用于一小时内的土地出售。这是因为他们的合同...",
      "title": "如果Yuga实验室和BAYC只是在他们的NFT合同中使用简单的气体优化，他们可以为用户节省多达8000万美元的费用"
    },
    {
      "locale": "zh-Hant",
      "the_new_excerpt": "備受關注的與Bored Ape遊艇俱樂部有關的虛擬土地出售事件\n幾個小時前上線，影響了整個加密貨幣市場的很大一部分。\n大量的需求導致價值近2億美元的ETH費用被用於購買天然氣\n用於一小時內的土地出售。這是因爲他們的合同...",
      "title": "如果Yuga實驗室和BAYC只是在他們的NFT合同中使用簡單的氣體優化，他們可以爲用戶節省多達8000萬美元的費用"
    }
  ]
}